package domain

import (
	"context"
	"dove/internal/model"
	"dove/pkg/pagination"
)

// {{.Name}}Repository {{.Name}} 仓库接口
type {{.Name}}Repository interface {
	Create(ctx context.Context, {{.Name | lower}} *model.{{.Name}}) error
	GetByID(ctx context.Context, id uint) (*model.{{.Name}}, error)
	GetAll(ctx context.Context) ([]model.{{.Name}}, error)
	GetAllWithPagination(ctx context.Context, page *pagination.PageRequest) ([]model.{{.Name}}, int64, error)
	Update(ctx context.Context, {{.Name | lower}} *model.{{.Name}}) error
	Delete(ctx context.Context, id uint) error
}

// {{.Name}}Service {{.Name}} 服务接口
type {{.Name}}Service interface {
	Create(ctx context.Context, {{.Name | lower}} *model.{{.Name}}) error
	GetByID(ctx context.Context, id uint) (*model.{{.Name}}, error)
	GetAll(ctx context.Context) ([]model.{{.Name}}, error)
	GetAllWithPagination(ctx context.Context, page *pagination.PageRequest) (*pagination.PageResponse, error)
	Update(ctx context.Context, {{.Name | lower}} *model.{{.Name}}) error
	Delete(ctx context.Context, id uint) error
}

// Create{{.Name}}Request 创建 {{.Name}} 请求
type Create{{.Name}}Request struct {
{{range .Fields}}
{{- if and (ne .Name "ID") (ne .Name "CreatedAt") (ne .Name "UpdatedAt") (ne .Name "DeletedAt")}}
	{{.Name}} {{.Type}} `json:"{{.JSONName}}"{{if .Comment}} // {{.Comment}}{{end}}`
{{end}}
{{end}}
}

// Update{{.Name}}Request 更新 {{.Name}} 请求
type Update{{.Name}}Request struct {
{{range .Fields}}
{{- if and (ne .Name "ID") (ne .Name "CreatedAt") (ne .Name "UpdatedAt") (ne .Name "DeletedAt")}}
	{{.Name}} *{{.Type}} `json:"{{.JSONName}}"{{if .Comment}} // {{.Comment}}{{end}}`
{{end}}
{{end}}
}
